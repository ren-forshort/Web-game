<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cửa hàng Hoi AE KHTN</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* --- COPY THIS TO styles.css --- */
        :root {
            --bg-dark: #171a21;
            --bg-secondary: #1b2838;
            --bg-tertiary: #2a475e;
            --accent-blue: #66c0f4;
            --accent-green: #a4d007;
            --text-main: #c7d5e0;
            --text-muted: #8f98a0;
            --overlay: rgba(0, 0, 0, 0.8);
            --header-height: 90px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            min-height: 100vh;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--bg-tertiary);
            border-radius: 5px;
        }

        /* Header */
        header {
            background-color: var(--bg-dark);
            height: var(--header-height);
            display: flex;
            align-items: center;
            padding: 0 40px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* New Branding Styles */
        .brand-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: 40px;
            text-decoration: none;
            user-select: none;
        }

        .brand-logo {
            height: 60px;
            width: auto;
            object-fit: contain;
        }

        .brand-text-col {
            display: flex;
            flex-direction: column;
            justify-content: center;
            line-height: 1.1;
        }

        .brand-small {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }

        .brand-main {
            font-size: 26px;
            font-weight: 900;
            color: var(--accent-blue);
            letter-spacing: 1px;
            margin: 2px 0;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            margin-right: auto;
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            transition: color 0.2s;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--accent-blue);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-container {
            position: relative;
        }

        .search-input {
            background-color: #316282;
            border: 1px solid rgba(0,0,0,0.3);
            border-radius: 3px;
            padding: 8px 12px 8px 35px;
            color: white;
            width: 200px;
            transition: width 0.3s ease;
            outline: none;
        }

        .search-input:focus {
            background-color: white;
            color: black;
            width: 250px;
        }

        .search-icon {
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            color: var(--accent-blue);
            pointer-events: none;
        }

        .cart-btn {
            background: #5c7e10;
            color: white;
            border: none;
            padding: 5px 15px;
            cursor: pointer;
            font-size: 12px;
            border-radius: 2px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.2s;
        }

        .cart-btn:hover {
            background: #7aa518;
        }

        /* Main Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 240px 1fr;
            gap: 30px;
        }

        /* Sidebar */
        .sidebar {
            position: sticky;
            top: 110px; /* adjusted for header */
            height: fit-content;
        }

        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-title {
            color: var(--accent-blue);
            text-transform: uppercase;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .filter-option {
            display: block;
            color: var(--text-muted);
            padding: 5px 0;
            cursor: pointer;
            transition: color 0.2s;
        }

        .filter-option:hover {
            color: white;
        }

        .filter-option.active {
            color: var(--accent-blue);
            font-weight: bold;
        }

        /* Featured Carousel */
        .featured-section {
            grid-column: 1 / -1;
            margin-bottom: 40px;
            position: relative;
            height: 400px;
            background: var(--bg-dark);
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        .featured-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            display: flex;
        }

        .featured-slide.active {
            opacity: 1;
        }

        .featured-image {
            width: 65%;
            height: 100%;
            object-fit: cover;
        }

        .featured-info {
            width: 35%;
            background: #0f131a;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .featured-title {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .featured-desc {
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.5;
        }

        .featured-tags {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .tag {
            background: rgba(255,255,255,0.1);
            padding: 2px 8px;
            font-size: 11px;
            border-radius: 2px;
        }

        /* Game Grid */
        .store-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--bg-tertiary);
            padding-bottom: 10px;
        }

        .section-title {
            font-size: 18px;
            color: white;
            text-transform: uppercase;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }

        .game-card {
            background-color: var(--bg-secondary);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .game-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            z-index: 10;
        }

        .card-image-container {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: #000;
            overflow: hidden;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s;
        }

        .game-info {
            padding: 12px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .game-title {
            font-size: 14px;
            color: #c7d5e0;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .game-tags {
            font-size: 11px;
            color: #384959;
            margin-bottom: 10px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .modal-overlay.open {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: #1b2838;
            width: 800px;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid #2a475e;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
        }

        .modal-header {
            position: relative;
            height: 300px;
        }

        .modal-bg {
            width: 100%;
            height: 100%;
            object-fit: cover;
            mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.5);
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            z-index: 10;
        }
        
        .modal-close:hover {
            background: rgba(255,255,255,0.2);
        }

        .modal-body {
            padding: 20px 40px 40px;
            position: relative;
            top: -60px;
        }

        .modal-title {
            font-size: 32px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .modal-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 14px;
            color: var(--accent-blue);
        }

        .modal-desc {
            line-height: 1.6;
            margin-bottom: 30px;
            color: var(--text-main);
        }

        .buy-action {
            background: rgba(0,0,0,0.2);
            padding: 20px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-main {
            background: linear-gradient(90deg, #75b022 5%, #588a1b 95%);
            color: #d2efa9;
            border: none;
            padding: 10px 20px;
            border-radius: 2px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            text-shadow: 1px 1px 0px rgba(0,0,0,0.3);
            transition: all 0.2s;
        }

        .btn-main:hover {
            background: linear-gradient(90deg, #8ed629 5%, #6aa421 95%);
            color: white;
            transform: scale(1.02);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(to right, #1b2838, #2a475e);
            border-left: 4px solid var(--accent-blue);
            padding: 15px 25px;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateY(100px);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toast.show {
            transform: translateY(0);
        }

        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
            }
            .sidebar {
                display: none;
            }
            .featured-section {
                height: auto;
                flex-direction: column;
            }
            .featured-slide {
                position: relative;
                flex-direction: column;
                height: auto;
            }
            .featured-image, .featured-info {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="brand-container">
            <img src="https://placehold.co/60x60/1b2838/66c0f4?text=LOGO" alt="Logo" class="brand-logo">
            <div class="brand-text-col">
                <span class="brand-small">Hoi AE</span>
                <span class="brand-main">KHTN</span>
                <span class="brand-small">Store</span>
            </div>
        </div>
        <nav class="nav-links">
            <a href="#" class="nav-link active">Cửa hàng</a>
            <a href="#" class="nav-link">Cộng đồng</a>
            <a href="#" class="nav-link">Giới thiệu</a>
            <a href="#" class="nav-link">Hỗ trợ</a>
        </nav>
        <div class="header-actions">
            <div class="search-container">
                <i data-lucide="search" class="search-icon"></i>
                <input type="text" class="search-input" placeholder="tìm kiếm" id="search-input">
            </div>
            <button class="cart-btn" onclick="toggleCart()">
                <i data-lucide="shopping-cart" size="16"></i>
                Giỏ hàng (<span id="cart-count">0</span>)
            </button>
        </div>
    </header>

    <div class="container">
        <!-- Featured Carousel -->
        <section class="featured-section" id="featured-carousel">
            <!-- Injected by JS -->
        </section>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Thể loại</div>
                <div class="filter-option active" onclick="filterByGenre('All')">Tất cả sản phẩm</div>
                <div class="filter-option" onclick="filterByGenre('Hành động')">Hành động</div>
                <div class="filter-option" onclick="filterByGenre('Nhập vai (RPG)')">Nhập vai (RPG)</div>
                <div class="filter-option" onclick="filterByGenre('Chiến thuật')">Chiến thuật</div>
                <div class="filter-option" onclick="filterByGenre('Phiêu lưu')">Phiêu lưu</div>
                <div class="filter-option" onclick="filterByGenre('Mô phỏng')">Mô phỏng</div>
                <div class="filter-option" onclick="filterByGenre('Thể thao')">Thể thao</div>
            </div>
        </aside>

        <!-- Main Store Content -->
        <main>
            <div class="store-header">
                <div class="section-title">Đang xem <span id="current-genre">Tất cả trò chơi</span></div>
                <div style="font-size: 12px; color: var(--text-muted);">
                    Sắp xếp theo: <span style="color:white; cursor:pointer;">Bán chạy nhất</span>
                </div>
            </div>

            <div class="games-grid" id="games-grid">
                <!-- Games injected here -->
            </div>
        </main>
    </div>

    <!-- Game Details Modal -->
    <div class="modal-overlay" id="game-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" onclick="closeModal()"><i data-lucide="x"></i></button>
                <img src="" alt="Game Background" class="modal-bg" id="modal-img">
            </div>
            <div class="modal-body">
                <h1 class="modal-title" id="modal-title">null</h1>
                <div class="modal-meta">
                    <span id="modal-genre">Hành động</span>
                    <span>|</span>
                    <span id="modal-release">Phát hành: 2023</span>
                    <span>|</span>
                    <span style="color: #a4d007;">Rất tích cực</span>
                </div>
                <p class="modal-desc" id="modal-desc">
                    Mô tả trò chơi sẽ xuất hiện ở đây.
                </p>
                <div class="buy-action">
                    <div>
                        <div style="color: #c7d5e0; font-size: 14px;">Thêm <span id="modal-buy-title" style="color: white; font-weight: bold;">null</span> vào thư viện</div>
                    </div>
                    <button class="btn-main" id="modal-add-btn">Thêm vào giỏ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i data-lucide="check-circle" color="#a4d007"></i>
        <span>Đã thêm vào giỏ!</span>
    </div>

    <script>
        /* --- COPY THIS TO script.js --- */
        
        // Data - Cleaned up (No price/discount)
        const games = [
            { id: 1, title: "null", genre: "Nhập vai (RPG)", image: "https://placehold.co/600x400/101010/101010.png", desc: "desc", featured: true },
            { id: 2, title: "null", genre: "Hành động", image: "https://placehold.co/600x400/2b2005/2b2005.png", desc: "desc", featured: true },
            { id: 3, title: "null", genre: "Mô phỏng", image: "https://placehold.co/600x400/000033/000033.png", desc: "desc", featured: false },
            { id: 4, title: "null", genre: "Phiêu lưu", image: "https://placehold.co/600x400/4a0e0e/4a0e0e.png", desc: "desc", featured: false },
            { id: 5, title: "null", genre: "Thể thao", image: "https://placehold.co/600x400/990000/990000.png", desc: "desc", featured: false },
            { id: 6, title: "null", genre: "Chiến thuật", image: "https://placehold.co/600x400/1a1a1a/1a1a1a.png", desc: "desc", featured: false },
            { id: 7, title: "null", genre: "Hành động", image: "https://placehold.co/600x400/2e3b23/2e3b23.png", desc: "desc", featured: true },
            { id: 8, title: "null", genre: "Mô phỏng", image: "https://placehold.co/600x400/3e5c26/3e5c26.png", desc: "desc", featured: false },
            { id: 9, title: "null", genre: "Nhập vai (RPG)", image: "https://placehold.co/600x400/220044/220044.png", desc: "desc", featured: false },
            { id: 10, title: "null", genre: "Phiêu lưu", image: "https://placehold.co/600x400/3c8e22/3c8e22.png", desc: "desc", featured: false },
            { id: 11, title: "null", genre: "Chiến thuật", image: "https://placehold.co/600x400/440000/440000.png", desc: "desc", featured: false },
            { id: 12, title: "null", genre: "Thể thao", image: "https://placehold.co/600x400/000000/000000.png", desc: "desc", featured: false }
        ];

        let cart = [];
        let currentFilter = 'All';
        
        // DOM Elements
        const grid = document.getElementById('games-grid');
        const featuredContainer = document.getElementById('featured-carousel');
        const searchInput = document.getElementById('search-input');
        
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            } else {
                console.error("Lucide library failed to load.");
            }
        });

        // Initial Render
        renderFeatured();
        renderGames(games);

        // Featured Carousel Logic
        function renderFeatured() {
            const featuredGames = games.filter(g => g.featured);
            featuredContainer.innerHTML = featuredGames.map((game, index) => `
                <div class="featured-slide ${index === 0 ? 'active' : ''}" style="z-index: ${featuredGames.length - index}">
                    <img src="${game.image}" class="featured-image" alt="${game.title}">
                    <div class="featured-info">
                        <div>
                            <div class="featured-title">${game.title}</div>
                            <div class="featured-tags">
                                <span class="tag">Bán chạy nhất</span>
                                <span class="tag">${game.genre}</span>
                            </div>
                        </div>
                        <div class="featured-desc">${game.desc}</div>
                    </div>
                </div>
            `).join('');

            // Auto rotation
            let currentSlide = 0;
            const slides = document.querySelectorAll('.featured-slide');
            if (slides.length > 0) {
                setInterval(() => {
                    slides[currentSlide].classList.remove('active');
                    currentSlide = (currentSlide + 1) % slides.length;
                    slides[currentSlide].classList.add('active');
                }, 5000);
            }
        }

        // Render Game Grid
        function renderGames(gamesList) {
            grid.innerHTML = gamesList.map(game => `
                <div class="game-card" onclick="openModal(${game.id})">
                    <div class="card-image-container">
                        <img src="${game.image}" class="card-image" alt="${game.title}">
                    </div>
                    <div class="game-info">
                        <div class="game-title">${game.title}</div>
                        <div class="game-tags">${game.genre}</div>
                    </div>
                </div>
            `).join('');
            
            // Re-run icons for new elements
            if (typeof lucide !== 'undefined') {
                 lucide.createIcons();
            }
        }

        // Filters
        function filterByGenre(genre) {
            currentFilter = genre;
            document.getElementById('current-genre').innerText = genre === 'All' ? 'Tất cả trò chơi' : genre;
            
            // Update active class on sidebar
            document.querySelectorAll('.filter-option').forEach(el => {
                el.classList.remove('active');
                if(el.innerText.includes(genre)) el.classList.add('active');
            });

            applyFilters();
        }

        function applyFilters() {
            let filtered = games;

            // Genre Filter
            if (currentFilter !== 'All') {
                filtered = filtered.filter(g => g.genre === currentFilter);
            }

            // Search Text Filter
            const term = searchInput.value.toLowerCase();
            if (term) {
                filtered = filtered.filter(g => g.title.toLowerCase().includes(term));
            }

            renderGames(filtered);
        }

        searchInput.addEventListener('input', applyFilters);

        // Modal Logic
        const modal = document.getElementById('game-modal');
        let selectedGame = null;

        function openModal(id) {
            selectedGame = games.find(g => g.id === id);
            
            document.getElementById('modal-img').src = selectedGame.image;
            document.getElementById('modal-title').innerText = selectedGame.title;
            document.getElementById('modal-genre').innerText = selectedGame.genre;
            document.getElementById('modal-desc').innerText = selectedGame.desc;
            document.getElementById('modal-buy-title').innerText = selectedGame.title;
            
            // Add btn listener
            const btn = document.getElementById('modal-add-btn');
            btn.onclick = () => addToCart(selectedGame);

            modal.classList.add('open');
            document.body.style.overflow = 'hidden'; // prevent scrolling
            
            // Re-render icons in modal if any
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function closeModal() {
            modal.classList.remove('open');
            document.body.style.overflow = 'auto';
        }

        // Close modal on click outside
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        // Cart Logic
        function addToCart(game) {
            cart.push(game);
            updateCartCount();
            closeModal();
            showToast();
        }

        function updateCartCount() {
            document.getElementById('cart-count').innerText = cart.length;
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function toggleCart() {
            if (cart.length === 0) {
                alert("Giỏ hàng của bạn đang trống!");
                return;
            }
            alert(`Các mặt hàng trong giỏ:\n${cart.map(i => i.title).join('\n')}`);
        }

    </script>
</body>
</html>